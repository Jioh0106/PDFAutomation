<!DOCTYPE HTML>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.thymeleaf.org">
	<head>
		<meta charset="UTF-8">
		<title>엑셀 업로드</title>
	</head>
	
	<!-- Bootstrap CSS CDN -->
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
	<!-- TOAST UI CSS CDN -->
	<link rel="stylesheet" href="https://uicdn.toast.com/grid/latest/tui-grid.css" />

	<style>
		body {
			padding: 30px;
		}
		
		#main {
			width: 1200px;
			margin: auto;
			margin-bottom: 100px;
			
		}
		
		#export-btn {
			margin-left: 520px;
		}
	</style>

	<body>
		<div id="main" class="pt-3">
			<h3 class="mb-4">위치 기준 정보 조회</h3>
				
			<div class="card mb-5" style="width: 50rem;">
				<h5 class="card-header">면적조사서</h5>
				<div class="card-body p-3">
<!-- 					<h5 class="card-title">면적조사서</h5> -->
<!-- 					<h6 class="card-subtitle mb-2 text-body-secondary">Card subtitle</h6> -->
					<div class="row m-3" id="basic-table">
						<div id="grid1"></div>
					</div>
					<button type="button" class="btn btn-warning float-end" id="grid1-update" >수정하기</button>
				</div>
			</div>
			
			<div class="card mb-5" style="width: 50rem;">
				<h5 class="card-header">동의서</h5>
				<div class="card-body p-3">
<!-- 					<h5 class="card-title">면적조사서</h5> -->
<!-- 					<h6 class="card-subtitle mb-2 text-body-secondary">Card subtitle</h6> -->
					<div class="row m-3" id="basic-table">
						<div id="grid2"></div>
					</div>
					<button type="button" class="btn btn-warning float-end" id="grid2-update">수정하기</button>
				</div>
			</div>
			
			<div class="card mb-5" style="width: 50rem;">
				<h5 class="card-header">계약서</h5>
				<div class="card-body p-3">
<!-- 					<h5 class="card-title">면적조사서</h5> -->
<!-- 					<h6 class="card-subtitle mb-2 text-body-secondary">Card subtitle</h6> -->
					<div class="row m-3" id="basic-table">
						<div id="grid3"></div>
					</div>
					<button type="button" class="btn btn-warning float-end" id="grid3-update" >수정하기</button>
				</div>
			</div>
			<div>
				<button type="button" class="btn btn-secondary" onclick="history.back()">뒤로가기</button>
				<button type="button" class="btn btn-success" id="export-btn">엑셀 파일로 다운로드</button>
			</div>

		 </div>
	</body>
	
	<!-- Bootstrap JS CDN -->
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
	<!-- TOAST UI JS CDN -->
	<script src="https://uicdn.toast.com/grid/latest/tui-grid.js"></script>
	<!-- 제이쿼리 -->
	<script src="/js/jquery-3.7.1.js"></script>	
	<!--Axios -->
	<script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
	
	<script th:inline="javascript">
		$(function () {
			
			// 면적조사서 그리드 정의
			const grid1 = new tui.Grid({
				el: document.getElementById('grid1'),
				columns: [
					{header: '필드명', name: 'field_name'},
					{header: 'X좌표', name: 'x_crd'},
					{header: 'Y좌표', name: 'y_crd'},
					{header: '폰트크기', name: 'font_size'},
				],
				data: []
			});
			
			// 동의서 그리드 정의
			const grid2 = new tui.Grid({
				el: document.getElementById('grid2'),
				columns: [
					{header: '필드명', name: 'field_name'},
					{header: 'X좌표', name: 'x_crd'},
					{header: 'Y좌표', name: 'y_crd'},
					{header: '폰트크기', name: 'font_size'},
				],
				data: []
			});
			
			// 계약서 그리드 정의
			const grid3 = new tui.Grid({
				el: document.getElementById('grid3'),
				columns: [
					{header: '필드명', name: 'field_name'},
					{header: 'X좌표', name: 'x_crd'},
					{header: 'Y좌표', name: 'y_crd'},
					{header: '폰트크기', name: 'font_size'},
				],
				data: []
			});
			
			// 그리드 데이터 초기화
			axios.get('/api/pos/check')
				.then(response => {
					console.log("성공:", response.data);  // 응답 데이터 출력
		            if (response.data.grid1Data && response.data.grid2Data && response.data.grid3Data) {
		                // 각 그리드 데이터 리셋
		            	grid1.resetData(response.data.grid1Data);
		                grid2.resetData(response.data.grid2Data);
		                grid3.resetData(response.data.grid3Data);
		                // 각 그리드 레이아웃 새로고침
		                grid1.refreshLayout(); 
		                grid2.refreshLayout(); 
		                grid3.refreshLayout(); 
		            } else {
		                console.error("서버 응답 형식이 올바르지 않습니다.");
		            }
				})
				.catch(error => {
				    console.error("에러 발생:", error);
				});
			
			function update() {
				
				
			}
			
			
		}); // 돔로드 이벤트
		
	</script>
	
</html>